(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function o(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=o(r);fetch(r.href,i)}})();function H(){}function Je(e){return e()}function Pe(){return Object.create(null)}function ee(e){e.forEach(Je)}function Ke(e){return typeof e=="function"}function te(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Ve(e){return Object.keys(e).length===0}function c(e,t){e.appendChild(t)}function R(e,t,o){e.insertBefore(t,o||null)}function L(e){e.parentNode&&e.parentNode.removeChild(e)}function ne(e,t){for(let o=0;o<e.length;o+=1)e[o]&&e[o].d(t)}function m(e){return document.createElement(e)}function j(e){return document.createTextNode(e)}function T(){return j(" ")}function ke(){return j("")}function Y(e,t,o,n){return e.addEventListener(t,o,n),()=>e.removeEventListener(t,o,n)}function g(e,t,o){o==null?e.removeAttribute(t):e.getAttribute(t)!==o&&e.setAttribute(t,o)}function et(e){return Array.from(e.childNodes)}function z(e,t){t=""+t,e.data!==t&&(e.data=t)}function V(e,t,o,n){o==null?e.style.removeProperty(t):e.style.setProperty(t,o,n?"important":"")}function Oe(e,t,o){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t){r.selected=!0;return}}(!o||t!==void 0)&&(e.selectedIndex=-1)}function tt(e){const t=e.querySelector(":checked");return t&&t.__value}function be(e,t,o){e.classList[o?"add":"remove"](t)}function nt(e,t,{bubbles:o=!1,cancelable:n=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,o,n,t),r}let ae;function ce(e){ae=e}function Se(){if(!ae)throw new Error("Function called outside component initialization");return ae}function ot(e){Se().$$.on_mount.push(e)}function rt(e){Se().$$.on_destroy.push(e)}function lt(){const e=Se();return(t,o,{cancelable:n=!1}={})=>{const r=e.$$.callbacks[t];if(r){const i=nt(t,o,{cancelable:n});return r.slice().forEach(l=>{l.call(e,i)}),!i.defaultPrevented}return!0}}const $=[],Ae=[];let Q=[];const Le=[],it=Promise.resolve();let we=!1;function st(){we||(we=!0,it.then(Ze))}function pe(e){Q.push(e)}const ye=new Set;let X=0;function Ze(){if(X!==0)return;const e=ae;do{try{for(;X<$.length;){const t=$[X];X++,ce(t),ct(t.$$)}}catch(t){throw $.length=0,X=0,t}for(ce(null),$.length=0,X=0;Ae.length;)Ae.pop()();for(let t=0;t<Q.length;t+=1){const o=Q[t];ye.has(o)||(ye.add(o),o())}Q.length=0}while($.length);for(;Le.length;)Le.pop()();we=!1,ye.clear(),ce(e)}function ct(e){if(e.fragment!==null){e.update(),ee(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(pe)}}function ut(e){const t=[],o=[];Q.forEach(n=>e.indexOf(n)===-1?t.push(n):o.push(n)),o.forEach(n=>n()),Q=t}const ge=new Set;let at;function J(e,t){e&&e.i&&(ge.delete(e),e.i(t))}function ie(e,t,o,n){if(e&&e.o){if(ge.has(e))return;ge.add(e),at.c.push(()=>{ge.delete(e),n&&(o&&e.d(1),n())}),e.o(t)}else n&&n()}function se(e){e&&e.c()}function K(e,t,o,n){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,o),n||pe(()=>{const l=e.$$.on_mount.map(Je).filter(Ke);e.$$.on_destroy?e.$$.on_destroy.push(...l):ee(l),e.$$.on_mount=[]}),i.forEach(pe)}function Z(e,t){const o=e.$$;o.fragment!==null&&(ut(o.after_update),ee(o.on_destroy),o.fragment&&o.fragment.d(t),o.on_destroy=o.fragment=null,o.ctx=[])}function ft(e,t){e.$$.dirty[0]===-1&&($.push(e),st(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function oe(e,t,o,n,r,i,l,s=[-1]){const f=ae;ce(e);const u=e.$$={fragment:null,ctx:[],props:i,update:H,not_equal:r,bound:Pe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(f?f.$$.context:[])),callbacks:Pe(),dirty:s,skip_bound:!1,root:t.target||f.$$.root};l&&l(u.root);let _=!1;if(u.ctx=o?o(e,t.props||{},(p,d,...a)=>{const v=a.length?a[0]:d;return u.ctx&&r(u.ctx[p],u.ctx[p]=v)&&(!u.skip_bound&&u.bound[p]&&u.bound[p](v),_&&ft(e,p)),d}):[],u.update(),_=!0,ee(u.before_update),u.fragment=n?n(u.ctx):!1,t.target){if(t.hydrate){const p=et(t.target);u.fragment&&u.fragment.l(p),p.forEach(L)}else u.fragment&&u.fragment.c();t.intro&&J(e.$$.fragment),K(e,t.target,t.anchor,t.customElement),Ze()}ce(f)}class re{$destroy(){Z(this,1),this.$destroy=H}$on(t,o){if(!Ke(o))return H;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(o),()=>{const r=n.indexOf(o);r!==-1&&n.splice(r,1)}}$set(t){this.$$set&&!Ve(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Re={I:[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],J:[[2,0,0],[2,2,2],[0,0,0]],L:[[0,0,3],[3,3,3],[0,0,0]],O:[[4,4],[4,4]],S:[[0,5,5],[5,5,0],[0,0,0]],T:[[0,6,0],[6,6,6],[0,0,0]],Z:[[7,7,0],[0,7,7],[0,0,0]]},dt={I:1,J:2,L:3,O:4,S:5,T:6,Z:7},ue={0:"transparent",1:"#00FFFF",2:"#0000FF",3:"#FF7F00",4:"#FFFF00",5:"#00FF00",6:"#800080",7:"#FF0000"};function xe(){const e=Object.keys(Re),t=e[Math.floor(Math.random()*e.length)],o=dt[t];return{shape:Re[t],position:{x:3,y:0},type:o}}function gt(e){const t=e.length,o=Array(t).fill(0).map(()=>Array(t).fill(0));for(let n=0;n<t;n++)for(let r=0;r<t;r++)o[r][t-1-n]=e[n][r];return o}function ve(e,t){const{shape:o,position:n}=t;for(let r=0;r<o.length;r++)for(let i=0;i<o[r].length;i++)if(o[r][i]!==0){const l=i+n.x,s=r+n.y;if(l<0||l>=e[0].length||s>=e.length||s>=0&&e[s][l]!==0)return!1}return!0}function _e(e,t){const{shape:o,position:n}=t;let r=n.y;for(;ve(e,{shape:o,position:{x:n.x,y:r+1},type:t.type});)r++;return{x:n.x,y:r}}var D=(e=>(e.LEFT="LEFT",e.RIGHT="RIGHT",e.DOWN="DOWN",e.ROTATE="ROTATE",e.HARD_DROP="HARD_DROP",e.PAUSE="PAUSE",e.RESUME="RESUME",e.RESTART="RESTART",e))(D||{});const Te=10,Ee=20,mt=100,ht=2;function pt(){return Array(Ee).fill(0).map(()=>Array(Te).fill(0))}function me(){const e=xe(),t=xe(),o=pt();return{grid:o,currentTetromino:t,nextTetromino:e,score:0,level:1,prevLevel:1,lines:0,gameOver:!1,isPaused:!1,ghostPosition:_e(o,t)}}function vt(e,t){const o=e.map(l=>[...l]),{shape:n,position:r,type:i}=t;for(let l=0;l<n.length;l++)for(let s=0;s<n[l].length;s++)if(n[l][s]!==0){const f=l+r.y,u=s+r.x;f>=0&&f<Ee&&u>=0&&u<Te&&(o[f][u]=i)}return o}function _t(e){const t=[...e];let o=0;for(let n=Ee-1;n>=0;n--)t[n].every(r=>r!==0)&&(t.splice(n,1),t.unshift(Array(Te).fill(0)),o++,n++);return{newGrid:t,linesCleared:o}}function bt(e){return Math.floor(e/10)+1}function de(e){return Math.max(800-(e-1)*50,50)}function he(e,t){if(e.gameOver||e.isPaused||!e.currentTetromino)return e;const{currentTetromino:o,grid:n}=e,{x:r,y:i}=o.position;let l=r,s=i;switch(t){case"LEFT":l=r-1;break;case"RIGHT":l=r+1;break;case"DOWN":s=i+1;break}const u={...o,position:{x:l,y:s}};return ve(n,u)?{...e,currentTetromino:u,ghostPosition:_e(n,u)}:t==="DOWN"?Qe(e):e}function yt(e){if(e.gameOver||e.isPaused||!e.currentTetromino)return e;const{currentTetromino:t,grid:o}=e,n=gt(t.shape),r={...t,shape:n},i=[{x:0,y:0},{x:-1,y:0},{x:1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:1,y:-1},{x:0,y:1},{x:-1,y:1},{x:1,y:1}];for(const l of i){const s={...r,position:{x:t.position.x+l.x,y:t.position.y+l.y}};if(ve(o,s))return{...e,currentTetromino:s,ghostPosition:_e(o,s)}}return e}function wt(e){if(e.gameOver||e.isPaused||!e.currentTetromino||!e.ghostPosition)return e;const{currentTetromino:t,ghostPosition:o}=e,n=o.y-t.position.y,r=e.score+n*ht,i={...t,position:o};return Qe({...e,currentTetromino:i,score:r})}function Qe(e){if(!e.currentTetromino||!e.nextTetromino)return e;const{grid:t,currentTetromino:o,nextTetromino:n,score:r,lines:i}=e,l=vt(t,o),{newGrid:s,linesCleared:f}=_t(l),u=i+f,_=f*mt*e.level,p=r+_,d=bt(u),a=xe(),v=!ve(s,n);return{grid:s,currentTetromino:v?null:n,nextTetromino:v?null:a,score:p,lines:u,level:d,prevLevel:e.level,gameOver:v,isPaused:e.isPaused,ghostPosition:v?null:_e(s,n)}}function xt(e){return e.gameOver||e.isPaused?e:he(e,"DOWN")}function B(e,t){switch(t){case D.LEFT:return he(e,"LEFT");case D.RIGHT:return he(e,"RIGHT");case D.DOWN:return he(e,"DOWN");case D.ROTATE:return yt(e);case D.HARD_DROP:return wt(e);case D.PAUSE:return{...e,isPaused:!0};case D.RESUME:return{...e,isPaused:!1};case D.RESTART:return me();default:return e}}function Ce(e,t,o){const n=e.slice();return n[9]=t[o],n[11]=o,n}function De(e,t,o){const n=e.slice();return n[12]=t[o],n[14]=o,n}function Ge(e,t,o){const n=e.slice();return n[15]=t[o],n}function Ie(e){let t,o=e[5](),n=[];for(let r=0;r<o.length;r+=1)n[r]=Ne(Ge(e,o,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();t=ke()},m(r,i){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(r,i);R(r,t,i)},p(r,i){if(i&32){o=r[5]();let l;for(l=0;l<o.length;l+=1){const s=Ge(r,o,l);n[l]?n[l].p(s,i):(n[l]=Ne(s),n[l].c(),n[l].m(t.parentNode,t))}for(;l<n.length;l+=1)n[l].d(1);n.length=o.length}},d(r){ne(n,r),r&&L(t)}}}function Ne(e){let t;return{c(){t=m("div"),g(t,"class","absolute top-0 bottom-0 drop-guide svelte-1tt53x9"),V(t,"width","10%"),V(t,"left",e[15]*10+"%")},m(o,n){R(o,t,n)},p:H,d(o){o&&L(t)}}}function Fe(e){let t;return{c(){t=m("div"),g(t,"class","cell w-full h-full border border-gray-800 transition-colors duration-100 svelte-1tt53x9"),V(t,"background-color",e[3](e[12],e[11],e[14])),be(t,"active-tetromino",e[4](e[11],e[14])),be(t,"landing-flash",e[1])},m(o,n){R(o,t,n)},p(o,n){n&1&&V(t,"background-color",o[3](o[12],o[11],o[14])),n&2&&be(t,"landing-flash",o[1])},d(o){o&&L(t)}}}function He(e){let t,o=e[9],n=[];for(let r=0;r<o.length;r+=1)n[r]=Fe(De(e,o,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();t=ke()},m(r,i){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(r,i);R(r,t,i)},p(r,i){if(i&27){o=r[9];let l;for(l=0;l<o.length;l+=1){const s=De(r,o,l);n[l]?n[l].p(s,i):(n[l]=Fe(s),n[l].c(),n[l].m(t.parentNode,t))}for(;l<n.length;l+=1)n[l].d(1);n.length=o.length}},d(r){ne(n,r),r&&L(t)}}}function Me(e){let t;return{c(){t=m("div"),g(t,"class","landing-effect svelte-1tt53x9")},m(o,n){R(o,t,n)},d(o){o&&L(t)}}}function Ue(e){let t,o,n,r=e[0].score===0?"Welcome!":"Game Over",i,l,s,f,u=e[0].score===0?"Start Game":"Play Again",_,p,d,a=e[0].score>0&&We(e);return{c(){t=m("div"),o=m("div"),n=m("h2"),i=j(r),l=T(),a&&a.c(),s=T(),f=m("button"),_=j(u),g(n,"class","text-red-500 text-2xl font-bold mb-4"),g(f,"class","bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md focus:outline-none"),g(o,"class","text-center p-4"),g(t,"class","absolute inset-0 bg-black bg-opacity-75 flex items-center justify-center rounded-md")},m(v,h){R(v,t,h),c(t,o),c(o,n),c(n,i),c(o,l),a&&a.m(o,null),c(o,s),c(o,f),c(f,_),p||(d=Y(f,"click",e[8]),p=!0)},p(v,h){h&1&&r!==(r=v[0].score===0?"Welcome!":"Game Over")&&z(i,r),v[0].score>0?a?a.p(v,h):(a=We(v),a.c(),a.m(o,s)):a&&(a.d(1),a=null),h&1&&u!==(u=v[0].score===0?"Start Game":"Play Again")&&z(_,u)},d(v){v&&L(t),a&&a.d(),p=!1,d()}}}function We(e){let t,o,n=e[0].score+"",r;return{c(){t=m("p"),o=j("Score: "),r=j(n),g(t,"class","text-white mb-4")},m(i,l){R(i,t,l),c(t,o),c(t,r)},p(i,l){l&1&&n!==(n=i[0].score+"")&&z(r,n)},d(i){i&&L(t)}}}function je(e){let t;return{c(){t=m("div"),t.innerHTML=`<div class="text-center"><h2 class="text-yellow-400 text-2xl font-bold">Game Paused</h2> 
        <p class="text-white mt-2">Press P to resume</p></div>`,g(t,"class","absolute inset-0 bg-black bg-opacity-75 flex items-center justify-center rounded-md")},m(o,n){R(o,t,n)},d(o){o&&L(t)}}}function kt(e){let t,o,n,r,i,l,s=e[0].currentTetromino&&!e[0].gameOver&&!e[0].isPaused&&Ie(e),f=e[0].grid,u=[];for(let a=0;a<f.length;a+=1)u[a]=He(Ce(e,f,a));let _=e[1]&&Me(),p=e[0].gameOver&&Ue(e),d=e[0].isPaused&&!e[0].gameOver&&je();return{c(){t=m("div"),s&&s.c(),o=T(),n=m("div");for(let a=0;a<u.length;a+=1)u[a].c();r=T(),_&&_.c(),i=T(),p&&p.c(),l=T(),d&&d.c(),g(n,"class","grid-container w-full aspect-[1/2] bg-gray-900 rounded-md overflow-hidden grid grid-cols-10 grid-rows-20 border-2 border-gray-700 relative svelte-1tt53x9"),g(t,"class","relative w-full max-w-md mx-auto")},m(a,v){R(a,t,v),s&&s.m(t,null),c(t,o),c(t,n);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(n,null);c(n,r),_&&_.m(n,null),c(t,i),p&&p.m(t,null),c(t,l),d&&d.m(t,null)},p(a,[v]){if(a[0].currentTetromino&&!a[0].gameOver&&!a[0].isPaused?s?s.p(a,v):(s=Ie(a),s.c(),s.m(t,o)):s&&(s.d(1),s=null),v&27){f=a[0].grid;let h;for(h=0;h<f.length;h+=1){const y=Ce(a,f,h);u[h]?u[h].p(y,v):(u[h]=He(y),u[h].c(),u[h].m(n,r))}for(;h<u.length;h+=1)u[h].d(1);u.length=f.length}a[1]?_||(_=Me(),_.c(),_.m(n,null)):_&&(_.d(1),_=null),a[0].gameOver?p?p.p(a,v):(p=Ue(a),p.c(),p.m(t,l)):p&&(p.d(1),p=null),a[0].isPaused&&!a[0].gameOver?d||(d=je(),d.c(),d.m(t,null)):d&&(d.d(1),d=null)},i:H,o:H,d(a){a&&L(t),s&&s.d(),ne(u,a),_&&_.d(),p&&p.d(),d&&d.d()}}}function St(e,t,o){const n=lt();let{gameState:r}=t,i=null,l=!1,s=!1;function f(d,a,v){if(r.currentTetromino){const{shape:h,position:y,type:x}=r.currentTetromino;for(let E=0;E<h.length;E++)for(let w=0;w<h[E].length;w++)if(h[E][w]!==0&&y.y+E===a&&y.x+w===v)return ue[x]}if(d===0&&r.ghostPosition&&r.currentTetromino){const{shape:h,type:y}=r.currentTetromino,x=r.ghostPosition.x,E=r.ghostPosition.y;for(let w=0;w<h.length;w++)for(let P=0;P<h[w].length;P++)if(h[w][P]!==0&&E+w===a&&x+P===v)return ue[y]+"40"}return ue[d]}function u(d,a){if(!r.currentTetromino)return!1;const{shape:v,position:h}=r.currentTetromino;for(let y=0;y<v.length;y++)for(let x=0;x<v[y].length;x++)if(v[y][x]!==0&&h.y+y===d&&h.x+x===a)return!0;return!1}function _(){if(!r.currentTetromino)return[];const{shape:d,position:a}=r.currentTetromino;let v=1/0,h=-1/0;for(let E=0;E<d.length;E++)for(let w=0;w<d[E].length;w++)d[E][w]!==0&&(v=Math.min(v,w),h=Math.max(h,w));const y=a.x+v,x=a.x+h+1;return[y,x]}const p=()=>n("restart");return e.$$set=d=>{"gameState"in d&&o(0,r=d.gameState)},e.$$.update=()=>{e.$$.dirty&65&&(r.currentTetromino&&i&&(r.ghostPosition&&r.ghostPosition.y===r.currentTetromino.position.y?o(7,l=!0):o(7,l=!1)),r.currentTetromino&&o(6,i={...r.currentTetromino.position})),e.$$.dirty&128&&l&&(o(1,s=!0),setTimeout(()=>{o(1,s=!1)},300),o(7,l=!1)),e.$$.dirty&1&&r.lines>0&&n("lineClear")},[r,s,n,f,u,_,i,l,p]}class Tt extends re{constructor(t){super(),oe(this,t,St,kt,te,{gameState:0})}}function Be(e,t,o){const n=e.slice();return n[1]=t[o],n[3]=o,n}function ze(e,t,o){const n=e.slice();return n[1]=t[o],n[5]=o,n}function Et(e){let t;return{c(){t=m("div"),g(t,"class","w-full aspect-square bg-gray-800")},m(o,n){R(o,t,n)},p:H,d(o){o&&L(t)}}}function Pt(e){let t,o=new Array(4),n=[];for(let r=0;r<o.length;r+=1)n[r]=qe(Be(e,o,r));return{c(){t=m("div");for(let r=0;r<n.length;r+=1)n[r].c();g(t,"class","grid grid-cols-4 grid-rows-4 bg-gray-800 w-full aspect-square")},m(r,i){R(r,t,i);for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(t,null)},p(r,i){if(i&1){o=new Array(4);let l;for(l=0;l<o.length;l+=1){const s=Be(r,o,l);n[l]?n[l].p(s,i):(n[l]=qe(s),n[l].c(),n[l].m(t,null))}for(;l<n.length;l+=1)n[l].d(1);n.length=o.length}},d(r){r&&L(t),ne(n,r)}}}function Ye(e){let t;return{c(){t=m("div"),g(t,"class","cell w-full h-full border border-gray-800 transition-colors duration-100"),V(t,"background-color",e[0].shape[e[3]]&&e[0].shape[e[3]][e[5]]!==0?ue[e[0].type]:"transparent")},m(o,n){R(o,t,n)},p(o,n){n&1&&V(t,"background-color",o[0].shape[o[3]]&&o[0].shape[o[3]][o[5]]!==0?ue[o[0].type]:"transparent")},d(o){o&&L(t)}}}function qe(e){let t,o=new Array(4),n=[];for(let r=0;r<o.length;r+=1)n[r]=Ye(ze(e,o,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();t=ke()},m(r,i){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(r,i);R(r,t,i)},p(r,i){if(i&1){o=new Array(4);let l;for(l=0;l<o.length;l+=1){const s=ze(r,o,l);n[l]?n[l].p(s,i):(n[l]=Ye(s),n[l].c(),n[l].m(t.parentNode,t))}for(;l<n.length;l+=1)n[l].d(1);n.length=o.length}},d(r){ne(n,r),r&&L(t)}}}function Ot(e){let t,o,n,r;function i(f,u){return f[0]?Pt:Et}let l=i(e),s=l(e);return{c(){t=m("div"),o=m("h3"),o.textContent="Next",n=T(),r=m("div"),s.c(),g(o,"class","text-white text-lg font-semibold mb-2 text-center"),g(r,"class","grid gap-0.5 w-full aspect-square justify-center items-center"),g(t,"class","next-piece w-full bg-gray-900 p-4 rounded-md border-2 border-gray-700 svelte-11fwc3f")},m(f,u){R(f,t,u),c(t,o),c(t,n),c(t,r),s.m(r,null)},p(f,[u]){l===(l=i(f))&&s?s.p(f,u):(s.d(1),s=l(f),s&&(s.c(),s.m(r,null)))},i:H,o:H,d(f){f&&L(t),s.d()}}}function At(e,t,o){let{nextTetromino:n}=t;return e.$$set=r=>{"nextTetromino"in r&&o(0,n=r.nextTetromino)},[n]}class Lt extends re{constructor(t){super(),oe(this,t,At,Ot,te,{nextTetromino:0})}}function Rt(e){let t,o,n,r,i,l,s,f,u,_,p,d,a,v,h,y,x,E,w,P,C,M,G,S,O;return{c(){t=m("div"),o=m("div"),n=m("div"),r=m("h3"),r.textContent="Score",i=T(),l=m("p"),s=j(e[0]),f=T(),u=m("div"),_=m("h3"),_.textContent="High Score",p=T(),d=m("p"),a=j(e[3]),v=T(),h=m("div"),y=m("h3"),y.textContent="Level",x=T(),E=m("p"),w=j(e[1]),P=T(),C=m("div"),M=m("h3"),M.textContent="Lines",G=T(),S=m("p"),O=j(e[2]),g(r,"class","text-white text-sm font-semibold"),g(l,"class","text-yellow-400 text-xl font-bold"),g(n,"class","stat svelte-57nfze"),g(_,"class","text-white text-sm font-semibold"),g(d,"class","text-red-400 text-xl font-bold"),g(u,"class","stat svelte-57nfze"),g(y,"class","text-white text-sm font-semibold"),g(E,"class","text-green-400 text-xl font-bold"),g(h,"class","stat svelte-57nfze"),g(M,"class","text-white text-sm font-semibold"),g(S,"class","text-blue-400 text-xl font-bold"),g(C,"class","stat svelte-57nfze"),g(o,"class","grid grid-cols-1 gap-3"),g(t,"class","scoreboard bg-gray-900 p-4 rounded-md border-2 border-gray-700 w-full svelte-57nfze")},m(I,U){R(I,t,U),c(t,o),c(o,n),c(n,r),c(n,i),c(n,l),c(l,s),c(o,f),c(o,u),c(u,_),c(u,p),c(u,d),c(d,a),c(o,v),c(o,h),c(h,y),c(h,x),c(h,E),c(E,w),c(o,P),c(o,C),c(C,M),c(C,G),c(C,S),c(S,O)},p(I,[U]){U&1&&z(s,I[0]),U&8&&z(a,I[3]),U&2&&z(w,I[1]),U&4&&z(O,I[2])},i:H,o:H,d(I){I&&L(t)}}}function Ct(e,t,o){let{score:n}=t,{level:r}=t,{lines:i}=t,{highScore:l=0}=t;return e.$$set=s=>{"score"in s&&o(0,n=s.score),"level"in s&&o(1,r=s.level),"lines"in s&&o(2,i=s.lines),"highScore"in s&&o(3,l=s.highScore)},[n,r,i,l]}class Dt extends re{constructor(t){super(),oe(this,t,Ct,Rt,te,{score:0,level:1,lines:2,highScore:3})}}function Gt(e){let t;return{c(){t=m("div"),t.innerHTML=`<h3 class="text-white text-lg font-semibold mb-3 text-center">Controls</h3> 
  
  <div class="grid grid-cols-2 gap-2 text-sm"><div class="text-gray-400">Left</div> 
    <div class="text-white font-medium">‚Üê / A</div> 
    
    <div class="text-gray-400">Right</div> 
    <div class="text-white font-medium">‚Üí / D</div> 
    
    <div class="text-gray-400">Down</div> 
    <div class="text-white font-medium">‚Üì / S</div> 
    
    <div class="text-gray-400">Rotate</div> 
    <div class="text-white font-medium">‚Üë / W</div> 
    
    <div class="text-gray-400">Hard Drop</div> 
    <div class="text-white font-medium">Space</div> 
    
    <div class="text-gray-400">Pause</div> 
    <div class="text-white font-medium">P</div></div>`,g(t,"class","controls bg-gray-900 p-4 rounded-md border-2 border-gray-700 w-full svelte-1dl37er")},m(o,n){R(o,t,n)},p:H,i:H,o:H,d(o){o&&L(t)}}}class It extends re{constructor(t){super(),oe(this,t,null,Gt,te,{})}}function Nt(e,t,o){const n=e.slice();return n[33]=t[o],n[35]=o,n}function Xe(e){let t,o=e[0].isPaused?"Resume Game":"Pause Game",n,r,i;return{c(){t=m("button"),n=j(o),g(t,"class","bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none")},m(l,s){R(l,t,s),c(t,n),r||(i=Y(t,"click",e[10]),r=!0)},p(l,s){s[0]&1&&o!==(o=l[0].isPaused?"Resume Game":"Pause Game")&&z(n,o)},d(l){l&&L(t),r=!1,i()}}}function $e(e){let t,o,n,r,i,l,s,f,u,_,p,d,a,v,h,y,x,E,w,P,C,M=Array(10),G=[];for(let S=0;S<M.length;S+=1)G[S]=Ft(Nt(e,M,S));return{c(){t=m("div"),o=m("div"),n=m("h2"),n.textContent="Game Settings",r=T(),i=m("div"),l=m("label"),l.textContent="Starting Level (Higher = Faster)",s=T(),f=m("select");for(let S=0;S<G.length;S+=1)G[S].c();u=T(),_=m("div"),p=m("label"),d=m("input"),a=T(),v=m("span"),v.textContent="Enable Sound Effects",h=T(),y=m("div"),x=m("button"),x.textContent="Cancel",E=T(),w=m("button"),w.textContent="Save",g(n,"class","text-2xl font-bold text-white mb-4"),g(l,"for","level-select"),g(l,"class","block text-white text-sm font-medium mb-2"),g(f,"id","level-select"),g(f,"class","w-full bg-gray-700 text-white rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"),e[4]===void 0&&pe(()=>e[12].call(f)),g(i,"class","mb-4"),g(d,"type","checkbox"),g(d,"class","form-checkbox h-5 w-5 text-blue-600 rounded focus:ring-blue-500"),g(v,"class","text-white"),g(p,"class","flex items-center space-x-2"),g(_,"class","mb-4"),g(x,"class","bg-gray-600 hover:bg-gray-500 text-white px-4 py-2 rounded-md"),g(w,"class","bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md"),g(y,"class","flex justify-end space-x-3"),g(o,"class","bg-gray-800 p-6 rounded-lg shadow-lg max-w-md w-full"),g(t,"class","fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50")},m(S,O){R(S,t,O),c(t,o),c(o,n),c(o,r),c(o,i),c(i,l),c(i,s),c(i,f);for(let I=0;I<G.length;I+=1)G[I]&&G[I].m(f,null);Oe(f,e[4],!0),c(o,u),c(o,_),c(_,p),c(p,d),d.checked=e[2],c(p,a),c(p,v),c(o,h),c(o,y),c(y,x),c(y,E),c(y,w),P||(C=[Y(f,"change",e[12]),Y(d,"change",e[13]),Y(x,"click",e[8]),Y(w,"click",e[14])],P=!0)},p(S,O){O[0]&16&&Oe(f,S[4]),O[0]&4&&(d.checked=S[2])},d(S){S&&L(t),ne(G,S),P=!1,ee(C)}}}function Ft(e){let t,o=e[35]+1+"",n;return{c(){t=m("option"),n=j(o),t.__value=e[35]+1,t.value=t.__value},m(r,i){R(r,t,i),c(t,n)},p:H,d(r){r&&L(t)}}}function Ht(e){let t,o,n,r,i,l,s,f,u,_,p,d,a,v,h,y,x=e[2]?"üîä Sound On":"üîá Sound Off",E,w,P,C,M,G,S,O,I,U,q,le;l=new Lt({props:{nextTetromino:e[0].nextTetromino}}),f=new Dt({props:{score:e[0].score,level:e[0].level,lines:e[0].lines,highScore:e[1]}});let N=!e[0].gameOver&&Xe(e);C=new It({}),O=new Tt({props:{gameState:e[0]}}),O.$on("restart",e[7]),O.$on("resume",e[11]),O.$on("lineClear",Mt);let F=e[3]&&$e(e);return{c(){t=m("div"),o=m("div"),n=m("h1"),n.textContent="Blocks Game",r=T(),i=m("div"),se(l.$$.fragment),s=T(),se(f.$$.fragment),u=T(),_=m("div"),p=m("div"),d=m("div"),a=m("button"),a.textContent="Settings",v=T(),N&&N.c(),h=T(),y=m("button"),E=j(x),w=T(),P=m("div"),se(C.$$.fragment),M=T(),G=m("div"),S=m("div"),se(O.$$.fragment),I=T(),F&&F.c(),g(n,"class","text-3xl font-bold text-white mb-6"),g(i,"class","flex flex-col gap-6"),g(o,"class","w-64 bg-gray-800 p-4 flex flex-col border-r border-gray-700"),g(a,"class","bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none"),g(y,"class","bg-indigo-600 hover:bg-indigo-700 text-white py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none"),g(P,"class","mt-4 bg-gray-900 rounded-md"),g(d,"class","flex flex-col gap-3"),g(p,"class","absolute top-4 right-0 w-64 flex flex-col gap-4 pr-4"),g(S,"class","w-auto h-[90vh] aspect-[1/2]"),g(G,"class","flex justify-center items-center h-full max-h-screen pr-64"),g(_,"class","flex-1 p-4 relative"),g(t,"class","game-container min-h-screen flex svelte-13zb5m9")},m(k,W){R(k,t,W),c(t,o),c(o,n),c(o,r),c(o,i),K(l,i,null),c(i,s),K(f,i,null),c(t,u),c(t,_),c(_,p),c(p,d),c(d,a),c(d,v),N&&N.m(d,null),c(d,h),c(d,y),c(y,E),c(d,w),c(d,P),K(C,P,null),c(_,M),c(_,G),c(G,S),K(O,S,null),c(t,I),F&&F.m(t,null),U=!0,q||(le=[Y(a,"click",e[8]),Y(y,"click",e[9])],q=!0)},p(k,W){const fe={};W[0]&1&&(fe.nextTetromino=k[0].nextTetromino),l.$set(fe);const b={};W[0]&1&&(b.score=k[0].score),W[0]&1&&(b.level=k[0].level),W[0]&1&&(b.lines=k[0].lines),W[0]&2&&(b.highScore=k[1]),f.$set(b),k[0].gameOver?N&&(N.d(1),N=null):N?N.p(k,W):(N=Xe(k),N.c(),N.m(d,h)),(!U||W[0]&4)&&x!==(x=k[2]?"üîä Sound On":"üîá Sound Off")&&z(E,x);const A={};W[0]&1&&(A.gameState=k[0]),O.$set(A),k[3]?F?F.p(k,W):(F=$e(k),F.c(),F.m(t,null)):F&&(F.d(1),F=null)},i(k){U||(J(l.$$.fragment,k),J(f.$$.fragment,k),J(C.$$.fragment,k),J(O.$$.fragment,k),U=!0)},o(k){ie(l.$$.fragment,k),ie(f.$$.fragment,k),ie(C.$$.fragment,k),ie(O.$$.fragment,k),U=!1},d(k){k&&L(t),Z(l),Z(f),N&&N.d(),Z(C),Z(O),F&&F.d(),q=!1,ee(le)}}}const Mt=()=>null;function Ut(e,t,o){let n=me(),r,i=de(n.level),l=0,s=!0,f,u=!1,_=1,p,d,a,v,h,y;function x(b){if(s)switch(console.log("Playing sound:",b),b){case"move":p.currentTime=0,p.play().catch(A=>console.error("Error playing move sound:",A));break;case"rotate":d.currentTime=0,d.play().catch(A=>console.error("Error playing rotate sound:",A));break;case"drop":a.currentTime=0,a.play().catch(A=>console.error("Error playing drop sound:",A));break;case"clear":v.currentTime=0,v.play().catch(A=>console.error("Error playing clear sound:",A));break;case"levelUp":h.currentTime=0,h.play().catch(A=>console.error("Error playing levelUp sound:",A));break;case"gameOver":y.currentTime=0,y.play().catch(A=>console.error("Error playing gameOver sound:",A));break}}function E(b=_){o(0,n=me()),o(0,n.level=b,n),o(0,n.prevLevel=b,n),o(0,n.gameOver=!0,n),i=de(b)}function w(){P(),i=de(n.level),r=setInterval(()=>{const b=n.level;o(0,n=xt(n)),n.level!==b&&x("levelUp"),n.level!==n.prevLevel&&(i=de(n.level),w())},i)}function P(){r&&(clearInterval(r),r=void 0)}function C(b){switch(b.key){case"p":case"P":b.preventDefault(),n.isPaused&&!u?(o(0,n=B(n,D.RESUME)),w()):!u&&!n.gameOver&&(o(0,n=B(n,D.PAUSE)),P());break;case"ArrowLeft":case"a":case"A":case"ArrowRight":case"d":case"D":case"ArrowDown":case"s":case"S":case"ArrowUp":case"w":case"W":case" ":if(n.gameOver||n.isPaused)return;b.preventDefault(),b.key==="ArrowLeft"||b.key.toLowerCase()==="a"?(o(0,n=B(n,D.LEFT)),x("move")):b.key==="ArrowRight"||b.key.toLowerCase()==="d"?(o(0,n=B(n,D.RIGHT)),x("move")):b.key==="ArrowDown"||b.key.toLowerCase()==="s"?(o(0,n=B(n,D.DOWN)),x("move")):b.key==="ArrowUp"||b.key.toLowerCase()==="w"?o(0,n=B(n,D.ROTATE)):b.key===" "&&o(0,n=B(n,D.HARD_DROP));break;case"r":case"R":b.preventDefault(),M();break}}function M(){O(),o(0,n=me()),o(0,n.level=_,n),o(0,n.prevLevel=_,n),o(0,n.gameOver=!1,n),w()}function G(){o(3,u=!u),u&&!n.isPaused&&!n.gameOver&&(o(0,n=B(n,D.PAUSE)),P())}function S(){o(2,s=!s),localStorage.setItem("blocksGameSoundEnabled",String(s)),console.log("Sound toggled:",s),s?q():le()}function O(){if(n.score>l){o(1,l=n.score);try{localStorage.setItem("highScore",l.toString())}catch(b){console.error("Could not save high score to localStorage:",b)}}}function I(){try{const b=localStorage.getItem("highScore");b&&o(1,l=parseInt(b,10));const A=localStorage.getItem("blocksGameSoundEnabled");A!==null&&o(2,s=A==="true")}catch(b){console.error("Could not load preferences from localStorage:",b)}}function U(){console.log("Setting up background music"),f=new Audio("/sounds/theme.wav"),f.loop=!0,f.volume=.4}function q(){console.log("Attempting to play background music",s),f&&s&&!n.gameOver&&f.play().catch(b=>console.error("Audio playback error:",b))}function le(){f&&f.pause()}ot(()=>{console.log("Component mounted");const b=localStorage.getItem("blocksGameSoundEnabled");b!==null&&(o(2,s=b==="true"),console.log("Loaded sound preference:",s)),I(),p=new Audio("/sounds/move.wav"),d=new Audio("/sounds/rotate.wav"),a=new Audio("/sounds/drop.wav"),v=new Audio("/sounds/clear.wav"),h=new Audio("/sounds/levelup.wav"),y=new Audio("/sounds/gameover.wav"),U();const A=()=>{s&&(console.log("User interaction - starting audio"),q()),window.removeEventListener("click",A),window.removeEventListener("keydown",A)};return window.addEventListener("click",A),window.addEventListener("keydown",A),window.addEventListener("keydown",C),E(_),()=>{window.removeEventListener("keydown",C),P()}}),rt(()=>{O(),P(),le(),window.removeEventListener("keydown",C)});const N=()=>{n.isPaused&&!u?(o(0,n=B(n,D.RESUME)),w()):u||(o(0,n=B(n,D.PAUSE)),P())},F=()=>{n.isPaused&&(o(0,n=B(n,D.RESUME)),w())};function k(){_=tt(this),o(4,_)}function W(){s=this.checked,o(2,s)}const fe=()=>{G(),n.gameOver&&M()};return e.$$.update=()=>{e.$$.dirty[0]&1&&n.gameOver&&x("gameOver")},[n,l,s,u,_,w,P,M,G,S,N,F,k,W,fe]}class Wt extends re{constructor(t){super(),oe(this,t,Ut,Ht,te,{},null,[-1,-1])}}function jt(e){let t,o,n;return o=new Wt({}),{c(){t=m("main"),se(o.$$.fragment),g(t,"class","svelte-ipu353")},m(r,i){R(r,t,i),K(o,t,null),n=!0},p:H,i(r){n||(J(o.$$.fragment,r),n=!0)},o(r){ie(o.$$.fragment,r),n=!1},d(r){r&&L(t),Z(o)}}}class Bt extends re{constructor(t){super(),oe(this,t,null,jt,te,{})}}new Bt({target:document.getElementById("app")});
