(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function o(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=o(r);fetch(r.href,s)}})();function F(){}function Je(e){return e()}function Oe(){return Object.create(null)}function ee(e){e.forEach(Je)}function Ke(e){return typeof e=="function"}function te(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Ve(e){return Object.keys(e).length===0}function c(e,t){e.appendChild(t)}function L(e,t,o){e.insertBefore(t,o||null)}function A(e){e.parentNode&&e.parentNode.removeChild(e)}function ne(e,t){for(let o=0;o<e.length;o+=1)e[o]&&e[o].d(t)}function g(e){return document.createElement(e)}function U(e){return document.createTextNode(e)}function k(){return U(" ")}function Se(){return U("")}function B(e,t,o,n){return e.addEventListener(t,o,n),()=>e.removeEventListener(t,o,n)}function d(e,t,o){o==null?e.removeAttribute(t):e.getAttribute(t)!==o&&e.setAttribute(t,o)}function et(e){return Array.from(e.childNodes)}function q(e,t){t=""+t,e.data!==t&&(e.data=t)}function V(e,t,o,n){o==null?e.style.removeProperty(t):e.style.setProperty(t,o,n?"important":"")}function Ae(e,t,o){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t){r.selected=!0;return}}(!o||t!==void 0)&&(e.selectedIndex=-1)}function tt(e){const t=e.querySelector(":checked");return t&&t.__value}function _e(e,t,o){e.classList[o?"add":"remove"](t)}function nt(e,t,{bubbles:o=!1,cancelable:n=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,o,n,t),r}let ue;function ce(e){ue=e}function ke(){if(!ue)throw new Error("Function called outside component initialization");return ue}function ot(e){ke().$$.on_mount.push(e)}function rt(e){ke().$$.on_destroy.push(e)}function lt(){const e=ke();return(t,o,{cancelable:n=!1}={})=>{const r=e.$$.callbacks[t];if(r){const s=nt(t,o,{cancelable:n});return r.slice().forEach(l=>{l.call(e,s)}),!s.defaultPrevented}return!0}}const X=[],Le=[];let Q=[];const Re=[],it=Promise.resolve();let ye=!1;function st(){ye||(ye=!0,it.then(Ze))}function he(e){Q.push(e)}const be=new Set;let Y=0;function Ze(){if(Y!==0)return;const e=ue;do{try{for(;Y<X.length;){const t=X[Y];Y++,ce(t),ct(t.$$)}}catch(t){throw X.length=0,Y=0,t}for(ce(null),X.length=0,Y=0;Le.length;)Le.pop()();for(let t=0;t<Q.length;t+=1){const o=Q[t];be.has(o)||(be.add(o),o())}Q.length=0}while(X.length);for(;Re.length;)Re.pop()();ye=!1,be.clear(),ce(e)}function ct(e){if(e.fragment!==null){e.update(),ee(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(he)}}function at(e){const t=[],o=[];Q.forEach(n=>e.indexOf(n)===-1?t.push(n):o.push(n)),o.forEach(n=>n()),Q=t}const ge=new Set;let ut;function J(e,t){e&&e.i&&(ge.delete(e),e.i(t))}function ie(e,t,o,n){if(e&&e.o){if(ge.has(e))return;ge.add(e),ut.c.push(()=>{ge.delete(e),n&&(o&&e.d(1),n())}),e.o(t)}else n&&n()}function se(e){e&&e.c()}function K(e,t,o,n){const{fragment:r,after_update:s}=e.$$;r&&r.m(t,o),n||he(()=>{const l=e.$$.on_mount.map(Je).filter(Ke);e.$$.on_destroy?e.$$.on_destroy.push(...l):ee(l),e.$$.on_mount=[]}),s.forEach(he)}function Z(e,t){const o=e.$$;o.fragment!==null&&(at(o.after_update),ee(o.on_destroy),o.fragment&&o.fragment.d(t),o.on_destroy=o.fragment=null,o.ctx=[])}function ft(e,t){e.$$.dirty[0]===-1&&(X.push(e),st(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function oe(e,t,o,n,r,s,l,i=[-1]){const u=ue;ce(e);const a=e.$$={fragment:null,ctx:[],props:s,update:F,not_equal:r,bound:Oe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:Oe(),dirty:i,skip_bound:!1,root:t.target||u.$$.root};l&&l(a.root);let v=!1;if(a.ctx=o?o(e,t.props||{},(h,p,...f)=>{const _=f.length?f[0]:p;return a.ctx&&r(a.ctx[h],a.ctx[h]=_)&&(!a.skip_bound&&a.bound[h]&&a.bound[h](_),v&&ft(e,h)),p}):[],a.update(),v=!0,ee(a.before_update),a.fragment=n?n(a.ctx):!1,t.target){if(t.hydrate){const h=et(t.target);a.fragment&&a.fragment.l(h),h.forEach(A)}else a.fragment&&a.fragment.c();t.intro&&J(e.$$.fragment),K(e,t.target,t.anchor,t.customElement),Ze()}ce(u)}class re{$destroy(){Z(this,1),this.$destroy=F}$on(t,o){if(!Ke(o))return F;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(o),()=>{const r=n.indexOf(o);r!==-1&&n.splice(r,1)}}$set(t){this.$$set&&!Ve(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const De={I:[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],J:[[2,0,0],[2,2,2],[0,0,0]],L:[[0,0,3],[3,3,3],[0,0,0]],O:[[4,4],[4,4]],S:[[0,5,5],[5,5,0],[0,0,0]],T:[[0,6,0],[6,6,6],[0,0,0]],Z:[[7,7,0],[0,7,7],[0,0,0]]},dt={I:1,J:2,L:3,O:4,S:5,T:6,Z:7},ae={0:"transparent",1:"#00FFFF",2:"#0000FF",3:"#FF7F00",4:"#FFFF00",5:"#00FF00",6:"#800080",7:"#FF0000"};function we(){const e=Object.keys(De),t=e[Math.floor(Math.random()*e.length)],o=dt[t];return{shape:De[t],position:{x:3,y:0},type:o}}function gt(e){const t=e.length,o=Array(t).fill(0).map(()=>Array(t).fill(0));for(let n=0;n<t;n++)for(let r=0;r<t;r++)o[r][t-1-n]=e[n][r];return o}function pe(e,t){const{shape:o,position:n}=t;for(let r=0;r<o.length;r++)for(let s=0;s<o[r].length;s++)if(o[r][s]!==0){const l=s+n.x,i=r+n.y;if(l<0||l>=e[0].length||i>=e.length||i>=0&&e[i][l]!==0)return!1}return!0}function ve(e,t){const{shape:o,position:n}=t;let r=n.y;for(;pe(e,{shape:o,position:{x:n.x,y:r+1},type:t.type});)r++;return{x:n.x,y:r}}var C=(e=>(e.LEFT="LEFT",e.RIGHT="RIGHT",e.DOWN="DOWN",e.ROTATE="ROTATE",e.HARD_DROP="HARD_DROP",e.PAUSE="PAUSE",e.RESUME="RESUME",e.RESTART="RESTART",e))(C||{});const Te=10,Ee=20,mt=100,ht=2;function pt(){return Array(Ee).fill(0).map(()=>Array(Te).fill(0))}function xe(){const e=we(),t=we(),o=pt();return{grid:o,currentTetromino:t,nextTetromino:e,score:0,level:1,prevLevel:1,lines:0,gameOver:!1,isPaused:!1,ghostPosition:ve(o,t)}}function vt(e,t){const o=e.map(l=>[...l]),{shape:n,position:r,type:s}=t;for(let l=0;l<n.length;l++)for(let i=0;i<n[l].length;i++)if(n[l][i]!==0){const u=l+r.y,a=i+r.x;u>=0&&u<Ee&&a>=0&&a<Te&&(o[u][a]=s)}return o}function _t(e){const t=[...e];let o=0;for(let n=Ee-1;n>=0;n--)t[n].every(r=>r!==0)&&(t.splice(n,1),t.unshift(Array(Te).fill(0)),o++,n++);return{newGrid:t,linesCleared:o}}function bt(e){return Math.floor(e/10)+1}function de(e){return Math.max(800-(e-1)*50,50)}function me(e,t){if(e.gameOver||e.isPaused||!e.currentTetromino)return e;const{currentTetromino:o,grid:n}=e,{x:r,y:s}=o.position;let l=r,i=s;switch(t){case"LEFT":l=r-1;break;case"RIGHT":l=r+1;break;case"DOWN":i=s+1;break}const a={...o,position:{x:l,y:i}};return pe(n,a)?{...e,currentTetromino:a,ghostPosition:ve(n,a)}:t==="DOWN"?Qe(e):e}function yt(e){if(e.gameOver||e.isPaused||!e.currentTetromino)return e;const{currentTetromino:t,grid:o}=e,n=gt(t.shape),r={...t,shape:n},s=[{x:0,y:0},{x:-1,y:0},{x:1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:1,y:-1},{x:0,y:1},{x:-1,y:1},{x:1,y:1}];for(const l of s){const i={...r,position:{x:t.position.x+l.x,y:t.position.y+l.y}};if(pe(o,i))return{...e,currentTetromino:i,ghostPosition:ve(o,i)}}return e}function wt(e){if(e.gameOver||e.isPaused||!e.currentTetromino||!e.ghostPosition)return e;const{currentTetromino:t,ghostPosition:o}=e,n=o.y-t.position.y,r=e.score+n*ht,s={...t,position:o};return Qe({...e,currentTetromino:s,score:r})}function Qe(e){if(!e.currentTetromino||!e.nextTetromino)return e;const{grid:t,currentTetromino:o,nextTetromino:n,score:r,lines:s}=e,l=vt(t,o),{newGrid:i,linesCleared:u}=_t(l),a=s+u,v=u*mt*e.level,h=r+v,p=bt(a),f=we(),_=!pe(i,n);return{grid:i,currentTetromino:_?null:n,nextTetromino:_?null:f,score:h,lines:a,level:p,prevLevel:e.level,gameOver:_,isPaused:e.isPaused,ghostPosition:_?null:ve(i,n)}}function xt(e){return e.gameOver||e.isPaused?e:me(e,"DOWN")}function j(e,t){switch(t){case C.LEFT:return me(e,"LEFT");case C.RIGHT:return me(e,"RIGHT");case C.DOWN:return me(e,"DOWN");case C.ROTATE:return yt(e);case C.HARD_DROP:return wt(e);case C.PAUSE:return{...e,isPaused:!0};case C.RESUME:return{...e,isPaused:!1};case C.RESTART:return xe();default:return e}}function Ce(e,t,o){const n=e.slice();return n[9]=t[o],n[11]=o,n}function Ge(e,t,o){const n=e.slice();return n[12]=t[o],n[14]=o,n}function Ie(e,t,o){const n=e.slice();return n[15]=t[o],n}function Ne(e){let t,o=e[5](),n=[];for(let r=0;r<o.length;r+=1)n[r]=Fe(Ie(e,o,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();t=Se()},m(r,s){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(r,s);L(r,t,s)},p(r,s){if(s&32){o=r[5]();let l;for(l=0;l<o.length;l+=1){const i=Ie(r,o,l);n[l]?n[l].p(i,s):(n[l]=Fe(i),n[l].c(),n[l].m(t.parentNode,t))}for(;l<n.length;l+=1)n[l].d(1);n.length=o.length}},d(r){ne(n,r),r&&A(t)}}}function Fe(e){let t;return{c(){t=g("div"),d(t,"class","absolute top-0 bottom-0 drop-guide svelte-1tt53x9"),V(t,"width","10%"),V(t,"left",e[15]*10+"%")},m(o,n){L(o,t,n)},p:F,d(o){o&&A(t)}}}function He(e){let t;return{c(){t=g("div"),d(t,"class","cell w-full h-full border border-gray-800 transition-colors duration-100 svelte-1tt53x9"),V(t,"background-color",e[3](e[12],e[11],e[14])),_e(t,"active-tetromino",e[4](e[11],e[14])),_e(t,"landing-flash",e[1])},m(o,n){L(o,t,n)},p(o,n){n&1&&V(t,"background-color",o[3](o[12],o[11],o[14])),n&2&&_e(t,"landing-flash",o[1])},d(o){o&&A(t)}}}function Me(e){let t,o=e[9],n=[];for(let r=0;r<o.length;r+=1)n[r]=He(Ge(e,o,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();t=Se()},m(r,s){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(r,s);L(r,t,s)},p(r,s){if(s&27){o=r[9];let l;for(l=0;l<o.length;l+=1){const i=Ge(r,o,l);n[l]?n[l].p(i,s):(n[l]=He(i),n[l].c(),n[l].m(t.parentNode,t))}for(;l<n.length;l+=1)n[l].d(1);n.length=o.length}},d(r){ne(n,r),r&&A(t)}}}function Ue(e){let t;return{c(){t=g("div"),d(t,"class","landing-effect svelte-1tt53x9")},m(o,n){L(o,t,n)},d(o){o&&A(t)}}}function $e(e){let t,o,n,r,s,l,i=e[0].score+"",u,a,v,h,p;return{c(){t=g("div"),o=g("div"),n=g("h2"),n.textContent="Game Over",r=k(),s=g("p"),l=U("Score: "),u=U(i),a=k(),v=g("button"),v.textContent="Play Again",d(n,"class","text-red-500 text-2xl font-bold mb-4"),d(s,"class","text-white mb-4"),d(v,"class","bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md focus:outline-none"),d(o,"class","text-center p-4"),d(t,"class","absolute inset-0 bg-black bg-opacity-75 flex items-center justify-center rounded-md")},m(f,_){L(f,t,_),c(t,o),c(o,n),c(o,r),c(o,s),c(s,l),c(s,u),c(o,a),c(o,v),h||(p=B(v,"click",e[8]),h=!0)},p(f,_){_&1&&i!==(i=f[0].score+"")&&q(u,i)},d(f){f&&A(t),h=!1,p()}}}function je(e){let t;return{c(){t=g("div"),t.innerHTML=`<div class="text-center"><h2 class="text-yellow-400 text-2xl font-bold">Game Paused</h2> 
        <p class="text-white mt-2">Press P to resume</p></div>`,d(t,"class","absolute inset-0 bg-black bg-opacity-75 flex items-center justify-center rounded-md")},m(o,n){L(o,t,n)},d(o){o&&A(t)}}}function St(e){let t,o,n,r,s,l,i=e[0].currentTetromino&&!e[0].gameOver&&!e[0].isPaused&&Ne(e),u=e[0].grid,a=[];for(let f=0;f<u.length;f+=1)a[f]=Me(Ce(e,u,f));let v=e[1]&&Ue(),h=e[0].gameOver&&$e(e),p=e[0].isPaused&&!e[0].gameOver&&je();return{c(){t=g("div"),i&&i.c(),o=k(),n=g("div");for(let f=0;f<a.length;f+=1)a[f].c();r=k(),v&&v.c(),s=k(),h&&h.c(),l=k(),p&&p.c(),d(n,"class","grid-container w-full aspect-[1/2] bg-gray-900 rounded-md overflow-hidden grid grid-cols-10 grid-rows-20 border-2 border-gray-700 relative svelte-1tt53x9"),d(t,"class","relative w-full max-w-md mx-auto")},m(f,_){L(f,t,_),i&&i.m(t,null),c(t,o),c(t,n);for(let m=0;m<a.length;m+=1)a[m]&&a[m].m(n,null);c(n,r),v&&v.m(n,null),c(t,s),h&&h.m(t,null),c(t,l),p&&p.m(t,null)},p(f,[_]){if(f[0].currentTetromino&&!f[0].gameOver&&!f[0].isPaused?i?i.p(f,_):(i=Ne(f),i.c(),i.m(t,o)):i&&(i.d(1),i=null),_&27){u=f[0].grid;let m;for(m=0;m<u.length;m+=1){const y=Ce(f,u,m);a[m]?a[m].p(y,_):(a[m]=Me(y),a[m].c(),a[m].m(n,r))}for(;m<a.length;m+=1)a[m].d(1);a.length=u.length}f[1]?v||(v=Ue(),v.c(),v.m(n,null)):v&&(v.d(1),v=null),f[0].gameOver?h?h.p(f,_):(h=$e(f),h.c(),h.m(t,l)):h&&(h.d(1),h=null),f[0].isPaused&&!f[0].gameOver?p||(p=je(),p.c(),p.m(t,null)):p&&(p.d(1),p=null)},i:F,o:F,d(f){f&&A(t),i&&i.d(),ne(a,f),v&&v.d(),h&&h.d(),p&&p.d()}}}function kt(e,t,o){const n=lt();let{gameState:r}=t,s=null,l=!1,i=!1;function u(p,f,_){if(r.currentTetromino){const{shape:m,position:y,type:x}=r.currentTetromino;for(let E=0;E<m.length;E++)for(let w=0;w<m[E].length;w++)if(m[E][w]!==0&&y.y+E===f&&y.x+w===_)return ae[x]}if(p===0&&r.ghostPosition&&r.currentTetromino){const{shape:m,type:y}=r.currentTetromino,x=r.ghostPosition.x,E=r.ghostPosition.y;for(let w=0;w<m.length;w++)for(let P=0;P<m[w].length;P++)if(m[w][P]!==0&&E+w===f&&x+P===_)return ae[y]+"40"}return ae[p]}function a(p,f){if(!r.currentTetromino)return!1;const{shape:_,position:m}=r.currentTetromino;for(let y=0;y<_.length;y++)for(let x=0;x<_[y].length;x++)if(_[y][x]!==0&&m.y+y===p&&m.x+x===f)return!0;return!1}function v(){if(!r.currentTetromino)return[];const{shape:p,position:f}=r.currentTetromino;let _=1/0,m=-1/0;for(let E=0;E<p.length;E++)for(let w=0;w<p[E].length;w++)p[E][w]!==0&&(_=Math.min(_,w),m=Math.max(m,w));const y=f.x+_,x=f.x+m+1;return[y,x]}const h=()=>n("restart");return e.$$set=p=>{"gameState"in p&&o(0,r=p.gameState)},e.$$.update=()=>{e.$$.dirty&65&&(r.currentTetromino&&s&&(r.ghostPosition&&r.ghostPosition.y===r.currentTetromino.position.y?o(7,l=!0):o(7,l=!1)),r.currentTetromino&&o(6,s={...r.currentTetromino.position})),e.$$.dirty&128&&l&&(o(1,i=!0),setTimeout(()=>{o(1,i=!1)},300),o(7,l=!1)),e.$$.dirty&1&&r.lines>0&&n("lineClear")},[r,i,n,u,a,v,s,l,h]}class Tt extends re{constructor(t){super(),oe(this,t,kt,St,te,{gameState:0})}}function We(e,t,o){const n=e.slice();return n[1]=t[o],n[3]=o,n}function Be(e,t,o){const n=e.slice();return n[1]=t[o],n[5]=o,n}function Et(e){let t;return{c(){t=g("div"),d(t,"class","w-full aspect-square bg-gray-800")},m(o,n){L(o,t,n)},p:F,d(o){o&&A(t)}}}function Pt(e){let t,o=new Array(4),n=[];for(let r=0;r<o.length;r+=1)n[r]=ze(We(e,o,r));return{c(){t=g("div");for(let r=0;r<n.length;r+=1)n[r].c();d(t,"class","grid grid-cols-4 grid-rows-4 bg-gray-800 w-full aspect-square")},m(r,s){L(r,t,s);for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(t,null)},p(r,s){if(s&1){o=new Array(4);let l;for(l=0;l<o.length;l+=1){const i=We(r,o,l);n[l]?n[l].p(i,s):(n[l]=ze(i),n[l].c(),n[l].m(t,null))}for(;l<n.length;l+=1)n[l].d(1);n.length=o.length}},d(r){r&&A(t),ne(n,r)}}}function qe(e){let t;return{c(){t=g("div"),d(t,"class","cell w-full h-full border border-gray-800 transition-colors duration-100"),V(t,"background-color",e[0].shape[e[3]]&&e[0].shape[e[3]][e[5]]!==0?ae[e[0].type]:"transparent")},m(o,n){L(o,t,n)},p(o,n){n&1&&V(t,"background-color",o[0].shape[o[3]]&&o[0].shape[o[3]][o[5]]!==0?ae[o[0].type]:"transparent")},d(o){o&&A(t)}}}function ze(e){let t,o=new Array(4),n=[];for(let r=0;r<o.length;r+=1)n[r]=qe(Be(e,o,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();t=Se()},m(r,s){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(r,s);L(r,t,s)},p(r,s){if(s&1){o=new Array(4);let l;for(l=0;l<o.length;l+=1){const i=Be(r,o,l);n[l]?n[l].p(i,s):(n[l]=qe(i),n[l].c(),n[l].m(t.parentNode,t))}for(;l<n.length;l+=1)n[l].d(1);n.length=o.length}},d(r){ne(n,r),r&&A(t)}}}function Ot(e){let t,o,n,r;function s(u,a){return u[0]?Pt:Et}let l=s(e),i=l(e);return{c(){t=g("div"),o=g("h3"),o.textContent="Next",n=k(),r=g("div"),i.c(),d(o,"class","text-white text-lg font-semibold mb-2 text-center"),d(r,"class","grid gap-0.5 w-full aspect-square justify-center items-center"),d(t,"class","next-piece w-full bg-gray-900 p-4 rounded-md border-2 border-gray-700 svelte-11fwc3f")},m(u,a){L(u,t,a),c(t,o),c(t,n),c(t,r),i.m(r,null)},p(u,[a]){l===(l=s(u))&&i?i.p(u,a):(i.d(1),i=l(u),i&&(i.c(),i.m(r,null)))},i:F,o:F,d(u){u&&A(t),i.d()}}}function At(e,t,o){let{nextTetromino:n}=t;return e.$$set=r=>{"nextTetromino"in r&&o(0,n=r.nextTetromino)},[n]}class Lt extends re{constructor(t){super(),oe(this,t,At,Ot,te,{nextTetromino:0})}}function Rt(e){let t,o,n,r,s,l,i,u,a,v,h,p,f,_,m,y,x,E,w,P,R,M,D,T,H;return{c(){t=g("div"),o=g("div"),n=g("div"),r=g("h3"),r.textContent="Score",s=k(),l=g("p"),i=U(e[0]),u=k(),a=g("div"),v=g("h3"),v.textContent="High Score",h=k(),p=g("p"),f=U(e[3]),_=k(),m=g("div"),y=g("h3"),y.textContent="Level",x=k(),E=g("p"),w=U(e[1]),P=k(),R=g("div"),M=g("h3"),M.textContent="Lines",D=k(),T=g("p"),H=U(e[2]),d(r,"class","text-white text-sm font-semibold"),d(l,"class","text-yellow-400 text-xl font-bold"),d(n,"class","stat svelte-57nfze"),d(v,"class","text-white text-sm font-semibold"),d(p,"class","text-red-400 text-xl font-bold"),d(a,"class","stat svelte-57nfze"),d(y,"class","text-white text-sm font-semibold"),d(E,"class","text-green-400 text-xl font-bold"),d(m,"class","stat svelte-57nfze"),d(M,"class","text-white text-sm font-semibold"),d(T,"class","text-blue-400 text-xl font-bold"),d(R,"class","stat svelte-57nfze"),d(o,"class","grid grid-cols-1 gap-3"),d(t,"class","scoreboard bg-gray-900 p-4 rounded-md border-2 border-gray-700 w-full svelte-57nfze")},m(G,$){L(G,t,$),c(t,o),c(o,n),c(n,r),c(n,s),c(n,l),c(l,i),c(o,u),c(o,a),c(a,v),c(a,h),c(a,p),c(p,f),c(o,_),c(o,m),c(m,y),c(m,x),c(m,E),c(E,w),c(o,P),c(o,R),c(R,M),c(R,D),c(R,T),c(T,H)},p(G,[$]){$&1&&q(i,G[0]),$&8&&q(f,G[3]),$&2&&q(w,G[1]),$&4&&q(H,G[2])},i:F,o:F,d(G){G&&A(t)}}}function Dt(e,t,o){let{score:n}=t,{level:r}=t,{lines:s}=t,{highScore:l=0}=t;return e.$$set=i=>{"score"in i&&o(0,n=i.score),"level"in i&&o(1,r=i.level),"lines"in i&&o(2,s=i.lines),"highScore"in i&&o(3,l=i.highScore)},[n,r,s,l]}class Ct extends re{constructor(t){super(),oe(this,t,Dt,Rt,te,{score:0,level:1,lines:2,highScore:3})}}function Gt(e){let t;return{c(){t=g("div"),t.innerHTML=`<h3 class="text-white text-lg font-semibold mb-3 text-center">Controls</h3> 
  
  <div class="grid grid-cols-2 gap-2 text-sm"><div class="text-gray-400">Left</div> 
    <div class="text-white font-medium">← / A</div> 
    
    <div class="text-gray-400">Right</div> 
    <div class="text-white font-medium">→ / D</div> 
    
    <div class="text-gray-400">Down</div> 
    <div class="text-white font-medium">↓ / S</div> 
    
    <div class="text-gray-400">Rotate</div> 
    <div class="text-white font-medium">↑ / W</div> 
    
    <div class="text-gray-400">Hard Drop</div> 
    <div class="text-white font-medium">Space</div> 
    
    <div class="text-gray-400">Pause</div> 
    <div class="text-white font-medium">P</div></div>`,d(t,"class","controls bg-gray-900 p-4 rounded-md border-2 border-gray-700 w-full svelte-1dl37er")},m(o,n){L(o,t,n)},p:F,i:F,o:F,d(o){o&&A(t)}}}class It extends re{constructor(t){super(),oe(this,t,null,Gt,te,{})}}function Nt(e,t,o){const n=e.slice();return n[32]=t[o],n[34]=o,n}function Ye(e){let t,o=e[0].isPaused?"Resume Game":"Pause Game",n,r,s;return{c(){t=g("button"),n=U(o),d(t,"class","w-full mt-3 bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none")},m(l,i){L(l,t,i),c(t,n),r||(s=B(t,"click",e[10]),r=!0)},p(l,i){i[0]&1&&o!==(o=l[0].isPaused?"Resume Game":"Pause Game")&&q(n,o)},d(l){l&&A(t),r=!1,s()}}}function Xe(e){let t,o,n,r,s,l,i,u,a,v,h,p,f,_,m,y,x,E,w,P,R,M=Array(10),D=[];for(let T=0;T<M.length;T+=1)D[T]=Ft(Nt(e,M,T));return{c(){t=g("div"),o=g("div"),n=g("h2"),n.textContent="Game Settings",r=k(),s=g("div"),l=g("label"),l.textContent="Starting Level (Higher = Faster)",i=k(),u=g("select");for(let T=0;T<D.length;T+=1)D[T].c();a=k(),v=g("div"),h=g("label"),p=g("input"),f=k(),_=g("span"),_.textContent="Enable Sound Effects",m=k(),y=g("div"),x=g("button"),x.textContent="Cancel",E=k(),w=g("button"),w.textContent="Save",d(n,"class","text-2xl font-bold text-white mb-4"),d(l,"for","level-select"),d(l,"class","block text-white text-sm font-medium mb-2"),d(u,"id","level-select"),d(u,"class","w-full bg-gray-700 text-white rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"),e[4]===void 0&&he(()=>e[11].call(u)),d(s,"class","mb-4"),d(p,"type","checkbox"),d(p,"class","form-checkbox h-5 w-5 text-blue-600 rounded focus:ring-blue-500"),d(_,"class","text-white"),d(h,"class","flex items-center space-x-2"),d(v,"class","mb-4"),d(x,"class","bg-gray-600 hover:bg-gray-500 text-white px-4 py-2 rounded-md"),d(w,"class","bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md"),d(y,"class","flex justify-end space-x-3"),d(o,"class","bg-gray-800 p-6 rounded-lg shadow-lg max-w-md w-full"),d(t,"class","fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50")},m(T,H){L(T,t,H),c(t,o),c(o,n),c(o,r),c(o,s),c(s,l),c(s,i),c(s,u);for(let G=0;G<D.length;G+=1)D[G]&&D[G].m(u,null);Ae(u,e[4],!0),c(o,a),c(o,v),c(v,h),c(h,p),p.checked=e[2],c(h,f),c(h,_),c(o,m),c(o,y),c(y,x),c(y,E),c(y,w),P||(R=[B(u,"change",e[11]),B(p,"change",e[12]),B(x,"click",e[8]),B(w,"click",e[13])],P=!0)},p(T,H){H[0]&16&&Ae(u,T[4]),H[0]&4&&(p.checked=T[2])},d(T){T&&A(t),ne(D,T),P=!1,ee(R)}}}function Ft(e){let t,o=e[34]+1+"",n;return{c(){t=g("option"),n=U(o),t.__value=e[34]+1,t.value=t.__value},m(r,s){L(r,t,s),c(t,n)},p:F,d(r){r&&A(t)}}}function Ht(e){let t,o,n,r,s,l,i,u,a,v,h,p,f,_,m,y,x=e[0].gameOver?"New Game":"Restart Game",E,w,P,R,M,D,T=e[2]?"🔊 Sound On":"🔇 Sound Off",H,G,$,W,z,fe;l=new Tt({props:{gameState:e[0]}}),l.$on("restart",e[7]),l.$on("lineClear",Mt),a=new Lt({props:{nextTetromino:e[0].nextTetromino}}),h=new Ct({props:{score:e[0].score,level:e[0].level,lines:e[0].lines,highScore:e[1]}}),f=new It({});let I=!e[0].gameOver&&Ye(e),N=e[3]&&Xe(e);return{c(){t=g("div"),o=g("h1"),o.textContent="Blocks Game",n=k(),r=g("div"),s=g("div"),se(l.$$.fragment),i=k(),u=g("div"),se(a.$$.fragment),v=k(),se(h.$$.fragment),p=k(),se(f.$$.fragment),_=k(),m=g("div"),y=g("button"),E=U(x),w=k(),P=g("div"),R=g("button"),R.textContent="Settings",M=k(),D=g("button"),H=U(T),G=k(),I&&I.c(),$=k(),N&&N.c(),d(o,"class","text-3xl font-bold text-center text-white mb-6"),d(s,"class","md:col-span-2"),d(y,"class","w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none"),d(R,"class","flex-1 bg-purple-600 hover:bg-purple-700 text-white py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none"),d(D,"class","flex-1 bg-indigo-600 hover:bg-indigo-700 text-white py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none"),d(P,"class","flex gap-3 mt-3"),d(m,"class","game-actions mt-auto"),d(u,"class","flex flex-col gap-6"),d(r,"class","grid grid-cols-1 md:grid-cols-3 gap-6 lg:gap-8"),d(t,"class","game-container mx-auto p-4 max-w-6xl svelte-1qqjubi")},m(S,b){L(S,t,b),c(t,o),c(t,n),c(t,r),c(r,s),K(l,s,null),c(r,i),c(r,u),K(a,u,null),c(u,v),K(h,u,null),c(u,p),K(f,u,null),c(u,_),c(u,m),c(m,y),c(y,E),c(m,w),c(m,P),c(P,R),c(P,M),c(P,D),c(D,H),c(m,G),I&&I.m(m,null),c(t,$),N&&N.m(t,null),W=!0,z||(fe=[B(y,"click",e[7]),B(R,"click",e[8]),B(D,"click",e[9])],z=!0)},p(S,b){const O={};b[0]&1&&(O.gameState=S[0]),l.$set(O);const Pe={};b[0]&1&&(Pe.nextTetromino=S[0].nextTetromino),a.$set(Pe);const le={};b[0]&1&&(le.score=S[0].score),b[0]&1&&(le.level=S[0].level),b[0]&1&&(le.lines=S[0].lines),b[0]&2&&(le.highScore=S[1]),h.$set(le),(!W||b[0]&1)&&x!==(x=S[0].gameOver?"New Game":"Restart Game")&&q(E,x),(!W||b[0]&4)&&T!==(T=S[2]?"🔊 Sound On":"🔇 Sound Off")&&q(H,T),S[0].gameOver?I&&(I.d(1),I=null):I?I.p(S,b):(I=Ye(S),I.c(),I.m(m,null)),S[3]?N?N.p(S,b):(N=Xe(S),N.c(),N.m(t,null)):N&&(N.d(1),N=null)},i(S){W||(J(l.$$.fragment,S),J(a.$$.fragment,S),J(h.$$.fragment,S),J(f.$$.fragment,S),W=!0)},o(S){ie(l.$$.fragment,S),ie(a.$$.fragment,S),ie(h.$$.fragment,S),ie(f.$$.fragment,S),W=!1},d(S){S&&A(t),Z(l),Z(a),Z(h),Z(f),I&&I.d(),N&&N.d(),z=!1,ee(fe)}}}const Mt=()=>null;function Ut(e,t,o){let n=xe(),r,s=de(n.level),l=0,i=!0,u,a=!1,v=1,h,p,f,_,m,y;function x(b){if(i)switch(console.log("Playing sound:",b),b){case"move":h.currentTime=0,h.play().catch(O=>console.error("Error playing move sound:",O));break;case"rotate":p.currentTime=0,p.play().catch(O=>console.error("Error playing rotate sound:",O));break;case"drop":f.currentTime=0,f.play().catch(O=>console.error("Error playing drop sound:",O));break;case"clear":_.currentTime=0,_.play().catch(O=>console.error("Error playing clear sound:",O));break;case"levelUp":m.currentTime=0,m.play().catch(O=>console.error("Error playing levelUp sound:",O));break;case"gameOver":y.currentTime=0,y.play().catch(O=>console.error("Error playing gameOver sound:",O));break}}function E(b=v){o(0,n=xe()),o(0,n.level=b,n),o(0,n.prevLevel=b,n),s=de(b),w()}function w(){P(),s=de(n.level),r=setInterval(()=>{const b=n.level;o(0,n=xt(n)),n.level!==b&&x("levelUp"),n.level!==n.prevLevel&&(s=de(n.level),w())},s)}function P(){r&&(clearInterval(r),r=void 0)}function R(b){if(!(n.gameOver||n.isPaused))switch(b.key){case"ArrowLeft":case"a":case"A":b.preventDefault(),o(0,n=j(n,C.LEFT)),x("move");break;case"ArrowRight":case"d":case"D":b.preventDefault(),o(0,n=j(n,C.RIGHT)),x("move");break;case"ArrowDown":case"s":case"S":b.preventDefault(),o(0,n=j(n,C.DOWN)),x("move");break;case"ArrowUp":case"w":case"W":b.preventDefault(),o(0,n=j(n,C.ROTATE));break;case" ":b.preventDefault(),o(0,n=j(n,C.HARD_DROP));break;case"p":case"P":b.preventDefault(),n.isPaused?(o(0,n=j(n,C.RESUME)),w()):(o(0,n=j(n,C.PAUSE)),P());break;case"r":case"R":b.preventDefault(),M();break}}function M(){H(),E(v)}function D(){o(3,a=!a),a&&!n.isPaused&&!n.gameOver&&(o(0,n=j(n,C.PAUSE)),P())}function T(){o(2,i=!i),localStorage.setItem("blocksGameSoundEnabled",String(i)),console.log("Sound toggled:",i),i?W():z()}function H(){if(n.score>l){o(1,l=n.score);try{localStorage.setItem("highScore",l.toString())}catch(b){console.error("Could not save high score to localStorage:",b)}}}function G(){try{const b=localStorage.getItem("highScore");b&&o(1,l=parseInt(b,10));const O=localStorage.getItem("blocksGameSoundEnabled");O!==null&&o(2,i=O==="true")}catch(b){console.error("Could not load preferences from localStorage:",b)}}function $(){console.log("Setting up background music"),u=new Audio("/sounds/theme.wav"),u.loop=!0,u.volume=.4}function W(){console.log("Attempting to play background music",i),u&&i&&!n.gameOver&&u.play().catch(b=>console.error("Audio playback error:",b))}function z(){u&&u.pause()}ot(()=>{console.log("Component mounted");const b=localStorage.getItem("blocksGameSoundEnabled");b!==null&&(o(2,i=b==="true"),console.log("Loaded sound preference:",i)),G(),h=new Audio("/sounds/move.wav"),p=new Audio("/sounds/rotate.wav"),f=new Audio("/sounds/drop.wav"),_=new Audio("/sounds/clear.wav"),m=new Audio("/sounds/levelup.wav"),y=new Audio("/sounds/gameover.wav"),$();const O=()=>{i&&(console.log("User interaction - starting audio"),W()),window.removeEventListener("click",O),window.removeEventListener("keydown",O)};return window.addEventListener("click",O),window.addEventListener("keydown",O),window.addEventListener("keydown",R),E(v),()=>{window.removeEventListener("keydown",R),P()}}),rt(()=>{H(),P(),z(),window.removeEventListener("keydown",R)});const fe=()=>{n.isPaused&&!a?(o(0,n=j(n,C.RESUME)),w()):a||(o(0,n=j(n,C.PAUSE)),P())};function I(){v=tt(this),o(4,v)}function N(){i=this.checked,o(2,i)}const S=()=>{D(),n.gameOver&&M()};return e.$$.update=()=>{e.$$.dirty[0]&1&&n.gameOver&&x("gameOver")},[n,l,i,a,v,w,P,M,D,T,fe,I,N,S]}class $t extends re{constructor(t){super(),oe(this,t,Ut,Ht,te,{},null,[-1,-1])}}function jt(e){let t,o,n;return o=new $t({}),{c(){t=g("main"),se(o.$$.fragment),d(t,"class","svelte-ipu353")},m(r,s){L(r,t,s),K(o,t,null),n=!0},p:F,i(r){n||(J(o.$$.fragment,r),n=!0)},o(r){ie(o.$$.fragment,r),n=!1},d(r){r&&A(t),Z(o)}}}class Wt extends re{constructor(t){super(),oe(this,t,null,jt,te,{})}}new Wt({target:document.getElementById("app")});
